\documentclass[12pt,a4paper]{article}
\usepackage{mainsty}
\begin{document}
  \begin{center}
    \large\textsc{Comp 333 Midterm}
  \end{center}
  \begin{enumerate}
    \item Name one reason why someone might want to use \imp{virtual dispatch}. % 1
    \begin{itemize}
      \item Allows for same method call to have different behaviors at runtime, which is more flexible.
      \item Allows for abstraction over code behavior. Calling code only needs to know the signature of a method, and the runtime behavior can be dynamically changed by changing the underlying object the method is called on.
      \item Improves code modularity. Each distinct behavior can be isolated from each other behavior, and behaviors generally don't need to know about each other.
    \end{itemize}
    \item Name one reason why someone might not want to use \imp{virtual dispatch}. % 2
    \begin{itemize}
      \item Code can become more bloated. Usually, multiple classes have to be introduced, and these all have their own boilerplate associated with them.
      \item Code's behavior can become less explicit, and potentially more difficult to reason about.
      \begin{itemize}
        \item For example, an if/else clearly indicates a condition to test and code to execute depending on the condition. However, a method call may implicitly do something similar.
      \end{itemize}
      \item It generally has worse performance than an explicit if/else.
      \begin{itemize}
        \item Behind the scenes, indirect jumps are often needed, and these can easily jump out of cached instructions. Moreover, it's difficult to predict where an indirect jump will go.
      \end{itemize}
    \end{itemize}
    \clearpage
    \item Consider the following Java code: % 3
    \begin{itemize}
      \item[] \lstinputlisting[language=Java,firstline=2,lastline=4]{java/I1.java}
      \item[] \lstinputlisting[language=Java,firstline=3,lastline=7]{java/C1.java}
      \item[] \lstinputlisting[language=Java,firstline=3,lastline=7]{java/C2.java}
      \item[] \lstinputlisting[language=Java,firstline=2,lastline=12]{java/Main.java} 
      \item[] What is the output of the main method? 
      \begin{itemize}
        \item[] c1\\c2
      \end{itemize} 
    \end{itemize}
    \clearpage
    \item Consider the following code snippet: % 4
    \begin{itemize}
      \item[] \lstinputlisting[language=Java,firstline=2,lastline=12]{java/pr4/Main.java}
      \item[] Define any interfaces and/or classes necessary to make this snippet print 8, followed by 2.
      \item[] \lstinputlisting[language=Java]{java/an4/Operation.java}
      \item[] \lstinputlisting[language=Java]{java/an4/AddOperation.java}
      \item[] \lstinputlisting[language=Java]{java/an4/SubtractOperation.java}
      \item[] \lstinputlisting[language=Java]{java/an4/Main.java}  
    \end{itemize}
    \clearpage
    \item Consider the following Java code, which simulates a lock which can be either locked or unlocked. The lock is an immutable 
    data structure, so locking or unlocking returns a new lock in an appropriate state: Refactor this code to use virtual dispatch, 
    instead of using if/else. As a hint, you should have a base class/interface for Lock, and subclasses for locked and unlocked locks. 
    (Continued on to next page) % 5
    \begin{itemize}
      \item[] \lstinputlisting[language=Java,firstline=3,lastline=29]{java/pr5/Lock.java}
      \item[] Refactor this code to use virtual dispatch, instead of using if/else. As a hint, you should have a base class/interface 
      for Lock, and subclasses for locked and unlocked locks. (Continued on to next page)
      \clearpage
      \item[] \lstinputlisting[language=Java]{java/an5/Lock.java}
      \item[] \lstinputlisting[language=Java]{java/an5/LockedLock.java}
      \item[] \lstinputlisting[language=Java]{java/an5/UnlockedLock.java}  
    \end{itemize}
    \clearpage
    \item The code below does not compile. Why? % 6
    \begin{itemize}
      \item[] \lstinputlisting[language=Java,firstline=3,lastline=10]{java/pr6/MyInterface.java}
      \item[] \lstinputlisting[language=Java,firstline=3,lastline=10]{java/pr6/MyClass.java}
      \item[] ANSWER:\ 
      \item[] \lstinputlisting[language=Java]{java/an6/MyInterface.java}   
      \item[] \lstinputlisting[language=Java]{java/an6/MyClass.java}  
    \end{itemize}
    \clearpage
    \item Java supports \imp{sub-typing}. Write a Java code snippet that compiles and uses \imp{sub-typing}. % 7
    \begin{itemize}
      \item Object obj = ``foo'';
      \item ``foo'' is of type String, and String is a subtype of Object, so values of type String can be assigned to variables of types Object.
    \end{itemize} 
    \item Name one reason why someone might prefer \imp{static typing} over dynamic typing. % 8
    \begin{itemize}
      \item Helps eliminate programming errors at compile time.
      \item Helps structuring code (types can be a guide for program development).
      \item Compilers and runtime can usually optimize code better with type information.
    \end{itemize}
    \item Name one reason why someone might prefer \imp{dynamic typing} over static typing. % 9
    \begin{itemize}
      \item No need to annotate programs with types, which are a significant amount of code.
      \item More programs are possible, and can fundamentally represent things which cannot be represented in statically-typed code.
    \end{itemize}
    \item Name one reason why someone might prefer \imp{strong typing} over weak typing. % 10
    \begin{itemize}
      \item Strongly-type languages are more predictable, especially in the presence of bugs and errors.
      \item Strongly-type languages tend to emphasize code correctness.
    \end{itemize}
    \item Name one reason why someone might prefer \imp{weak typing} over strong typing. % 11
    \begin{itemize}
      \item No need for runtime array bounds check, so performance benefit.
      \item Weakly-typed languages tend to be more expressive. 
      \begin{itemize}
        \item C lets you do more than Java in terms of low-level manipulation, but its easy to hit undefined behavior, meaning programs lose all meaning.
        \item This can happen even when the code appears to be working correctly.
      \end{itemize}
    \end{itemize}
    \clearpage
    \item[] \imp{static}:\ happens at compile time
    \item[] \imp{dynamic}:\ happens at runtime
    \item[] \imp{type inference}:\ statically typed, but less explicit
    \item[] \imp{JavaScript}:\ dynamically typed, strongly typed
    \begin{itemize}
      \item[] Types are associated values:\
      \begin{itemize}
        \item[-] 5:\ int
        \item[-] ``foo'':\ String
      \end{itemize}
    \end{itemize} 
    \item[] \imp{Java}:\ statically typed, strongly typed
    \begin{itemize}
      \item[] Types are associated values:\
      \begin{itemize}
        \item[-] 5:\ int
        \item[-] ``foo'':\ String
      \end{itemize}
      \item[] Types are ALSO associated with variables
      \begin{itemize}
        \item[-] int x; String y; Object z; ImmutableList list;
      \end{itemize}
    \end{itemize} 
    \item[] \imp{C}:\ statically typed, weakly typed
    \begin{itemize}
      \item[-] Weak typing:\ the type might not be correct; the type can lie 
    \end{itemize} 
    \item[] \imp{Assembly}:\ untyped
    \clearpage
    \item Consider the Java class/interface definitions and snippets below. What is the output of the snippet? 
    \begin{itemize}
      \item[] \lstinputlisting[language=Java,firstline=2,lastline=19]{java/pr12/Base.java} 
      \item[] What is the output of the snippet? 
      \item[] \lstinputlisting[language=Java,firstline=2,lastline=25]{java/pr12/MyInterface.java}
    \end{itemize}
    \clearpage
    \item Consider the following Java snippet:\
    \begin{itemize}
      \item[] \lstinputlisting[language=Java,firstline=5,lastline=10]{java/pr13/Main.java}
      \item[] This code can be rewritten to entirely avoid the `if', by using virtual dispatch instead. 
      This code is partially rewritten below, where \dots are different `Conditional' expressions:\
      \item[] \lstinputlisting[language=Java,firstline=12,lastline=13]{java/pr13/Main.java}
      \item[] Write the remaining code necessary to make the above snippet operate the same as with the
      `if'. Include what the two uses of \dots above will need to be. As a hint, you will need classes 
      corresponding to true and false.
      \item[] ANSWER:\
      \item[] \lstinputlisting[language=Java,firstline=17,lastline=27]{java/pr13/Main.java}  
    \end{itemize}
  \end{enumerate}
\end{document}